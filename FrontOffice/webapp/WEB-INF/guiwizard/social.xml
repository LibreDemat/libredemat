<?xml version="1.0" encoding="UTF-8" ?>

<cvqprocess xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	 xsi:noNamespaceSchemaLocation="processes.xsd" >

  <processes group="social" caption="Social" order="1">
	<!--****************** PROCESSUS DEMANDE D'INSTALLATION DE TELE-ASSISTANCE *******************-->
	<process name="eAssistance" caption="Télé-assistance" subject="true" time="5">
		<title>Installation de télé-assistance</title>
		<package>fr.cg95.cvq.fo.social.assistance</package>
        <persistence>fr.cg95.cvq.fo.social.RemoteAssistancePersistence</persistence>

	    <!-- ******************* DEMANDEUR *********************-->
		<stage name="Subject" caption="Personne concernée">
			<title>Informations administratives de la personne concernée</title>
			<info>Renseignements sur la personne concernée par la demande</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer les informations sur le demandeur?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>

			<default>default</default>
			<next/>
			
			<state name="default" buttonArea="nonavigation" mode="static">
				<title>La personne concernée</title>
				<form>/social/assistance/subject/default</form>
			</state>

			<state name="subject">
				<title>La personne concernée</title>
				<form>/social/assistance/subject/subject</form>
				<button confirm="cancel" action="" transition="subject">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>La personne concernée</title>
				<form>/social/assistance/subject/display</form>
				<button transition="subject" action="">Modifier</button>
			</state>

			<select name="familyHome" property="selectionListWithoutCurrent" state="default">
				<title>Adulte(s) du compte</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="subject">createRequest</action> 
			</select>		

			<select name="familyHome" property="individualToRegister" state="all" >
				<title>Adulte</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="display">processStage</action> 
			</select>

		</stage>
		
		<stage name="Contactperson" caption="Contact" stagemenu="display" required="false">
			<title>Contact pour le rendez-vous d'installation</title>
			<info>Renseignements sur la personne à contacter pour la mise en oeuvre de la télé-assistance</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>

			<default>contact</default>
			<next confirm="continue"/>
			
			<state name="contact">
				<title>Personne à contacter</title>
				<form>/social/assistance/contactperson/contact</form>
				<button confirm="cancel" action="" transition="contact">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>Personne à contacter</title>
				<form>/social/assistance/contactperson/display</form>
				<button transition="contact" action="">Modifier</button>
			</state>

		</stage>

		<stage name="Keydeposit" caption="Dépositaire des clés" stagemenu="display" required="false">
			<title>Dépositaire des clés</title>
			<info>Renseignements sur la personne dépositaire des clés en cas d'absence de la personne prise en charge</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>

			<default>keydeposit</default>
			<next confirm="keydeposit"/>
			
			<state name="keydeposit">
				<title>Dépositaire des clés</title>
				<form>/social/assistance/keydeposit/keydeposit</form>
				<button confirm="cancel" action="" transition="keydeposit">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>Dépositaire des clés</title>
				<form>/social/assistance/keydeposit/display</form>
				<button transition="keydeposit" action="">Modifier</button>
			</state>

		</stage>

	    <!-- ******************* AJOUT JUSTIFICATIFS *********************-->		
		<stage ref="Documents"/>
		
		<!-- ******************* URGENCE *********************-->
		<stage name="Rules" caption="Urgence" stagemenu="display">
			<title>Urgence</title>
			<info>Préciser si cette demande est motivée par une urgence médicale</info>
			<default>default</default>

			<next script="processSubmit" action="" />
			
			<state name="default">
				<title>Urgence médicale</title>
				<form>/social/assistance/rules/rules</form>
				<button default="true" script="processSubmit" action="next">Enregistrer</button>
			</state>
		</stage>	
		
		<!-- ******************* VALIDATION *********************-->	
		<stage name="Validation" caption="Validation" stagemenu="display">
			<title>Validation et fin</title>
			<info>Résumé des informations fournies. A valider pour la création de votre demande</info>
		  
			<default>summary</default>

			<next>false</next>
			
			<state name="summary" mode="static">
				<form>/common/validation/requester</form>
				<form>/social/assistance/validation/summary</form>
				<form>/common/validation/documents</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
			</state>

			<state name="validation">
				<form>/common/validation/validation</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="save" script="validateRequest()">Enregistrer</button>
			</state>

			<state name="print" buttonArea="none" mode="noreturn">
				<form>/common/validation/print</form>
			</state>

		</stage>

	</process>

	<!--****************** PROCESSUS DEMANDE D'AIDE MENAGERE *******************-->
	<process name="eDomestichelp" caption="Aide ménagère" subject="true" time="15">
		<title>Aide ménagère</title>
		<confirm name="familyHome" check="hasSpouse">Pour cette demande, il est nécessaire de déclarer votre conjoint dans le compte foyer.</confirm>
		<package>fr.cg95.cvq.fo.social.domestichelp</package>
      	<persistence>fr.cg95.cvq.fo.social.DomesticHelpPersistence</persistence>

	    <!-- ******************* DEMANDEUR *********************-->
		<stage name="Subject" caption="Personne(s) concernée(s)">
			<title>Personne(s) concernée(s)</title>
			<info>Renseignements sur la ou les personnes concernées par la demande</info>
			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer les informations sur le demandeur?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>

			<default>default</default>
			<next/>
			
			<state name="default" buttonArea="nonavigation" mode="static">
				<title>La personne concernée</title>
				<form>/social/domestichelp/subject/default</form>
			</state>
			
			<state name="requestkind" >
				<title force="true">Demande</title>
				<form>/social/domestichelp/subject/requestkind</form>
				<button confirm="cancel" action="cancel" transition="requestkind">Annuler Saisie</button>
				<button type="next" default="true" script="processSubmit" action="" transition="referent">Page suivante</button>
			</state>
			
			<state name="referent" >
				<title force="true">Référent familial</title>
				<form>/social/domestichelp/subject/referent</form>
				<button confirm="cancel" action="cancel" transition="referent">Annuler Saisie</button>
				<button type="next" default="true" script="processSubmit" action="" transition="subject">Page suivante</button>
			</state>

			<state name="subject">
				<title>Demandeur</title>
				<form>/social/domestichelp/subject/subject</form>
				<button confirm="cancel" action="cancel" transition="subject">Annuler Saisie</button>
				<button type="next" default="true" script="processSubmit" action="" transition="tutor">Page suivante</button>
			</state>
			
			<state name="tutor">
				<title force="true">Tuteur</title>
				<form>/social/domestichelp/subject/tutor</form>
				<button confirm="cancel" action="cancel" transition="tutor">Annuler Saisie</button>
				<button type="next" default="true" script="processSubmit" action="" transition="spouseselect">Page suivante</button>
			</state>

			<state name="spouseselect" buttonArea="nonavigation" mode="static">
				<title force="true">Conjoint</title>
				<form>/social/domestichelp/subject/spouseselect</form>
			</state>
		
			<state name="spouse">
				<title force="true">Conjoint</title>
				<form>/social/domestichelp/subject/spouse</form>
				<button confirm="cancel" action="cancel" transition="spouse">Annuler Saisie</button>
				<button type="next" default="true" script="processSubmit" action="" transition="displayrequestkind">Enregistrer</button>
			</state>

			<state name="displayrequestkind" mode="static">
				<title force="true">Demande</title>
				<form>/social/domestichelp/subject/displayrequestkind</form>
				<button transition="requestkind" action="">Modifier</button>
				<button type="next" default="true" action="" transition="displayreferent">Page suivante</button>
			</state>
			
			<state name="displayreferent" mode="static">
				<title force="true">Référent familial</title>
				<form>/social/domestichelp/subject/displayreferent</form>
				<button transition="referent" action="">Modifier</button>
				<button type="next" default="true" action="" transition="display">Page suivante</button>
			</state>
			
			<state name="display" mode="static">
				<title>Demandeur</title>
				<form>/social/domestichelp/subject/display</form>
				<button transition="subject" action="">Modifier</button>
				<button type="next" default="true" action="" transition="displaytutor">Page suivante</button>	
			</state>
			
			<state name="displaytutor" mode="static">
				<title force="true">Tuteur</title>
				<form>/social/domestichelp/subject/displaytutor</form>
				<button transition="tutor" action="">Modifier</button>
				<button type="next" default="true" action="" transition="displayspouse">Page suivante</button>
			</state>
			
			<state name="displayspouse" mode="static">
				<title force="true">Conjoint</title>
				<form>/social/domestichelp/subject/displayspouse</form>
				<button transition="spouse" action="">Modifier</button>
			</state>

		
			
			<select name="familyHome" property="selectionListWithoutCurrent" state="default">
				<title>Adulte(s) du compte</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="requestkind">createRequest</action> 
			</select>		

			<select name="familyHome" property="individualToRegister" state="all" >
				<title>Personne(s) concernée(s)</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="displayrequestkind">processStage</action> 
			</select>

			<select name="fr.cg95.cvq.fo.common.Request" property="list(spouselist)" state="spouseselect">
				<title>Conjoint</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="spouse">get&amp;list=list(spouselist)</action> 
			</select>
		</stage>
		
		<stage name="Residences" caption="Habitation" stagemenu="display">
			<title>Habitation</title>
			<info>Renseignements sur l'habitation actuelle et éventuellement l'habitation précédente</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>

			<default>current</default>
			<next/>
			
			<state name="current">
				<title>Habitation actuelle</title>
				<form>/social/domestichelp/residences/current</form>
				<button confirm="cancel" action="cancel" transition="current">Annuler Saisie</button>
				<button type="next" default="true" script="processSubmit" action="" transition="previous">Page suivante</button>
			</state>
			
			<state name="previous">
				<title>Habitation antérieure</title>
				<form>/social/domestichelp/residences/previous</form>
				<button confirm="cancel" action="cancel" transition="previous">Annuler Saisie</button>
				<button type="next" default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>
			
			<state name="display" mode="static">
				<title>Habitation actuelle</title>
				<form>/social/domestichelp/residences/display</form>
				<button transition="current" action="">Modifier</button>
				<button type="next" default="true" action="" transition="displayprevious">Page suivante</button>
			</state>

			<state name="displayprevious" mode="static">
				<title>Habitation antérieure</title>
				<form>/social/domestichelp/residences/displayprevious</form>
				<button transition="previous" action="">Modifier</button>
			</state>

		</stage>
		
		<stage name="Resources" caption="Ressources" stagemenu="display">
			<title>Ressources</title>
			<info>Renseignements sur les ressources de la ou les personnes concernées</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>

			<default>subject</default>
			<next/>
			
			<state name="subject">
				<title>Ressources du demandeur</title>
				<form>/social/domestichelp/resources/subject</form>
				<button confirm="cancel" action="cancel" transition="subject">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="spouse">Page suivante</button>
			</state>

			<state name="spouse">
				<title>Ressources du conjoint</title>
				<form>/social/domestichelp/resources/spouse</form>
				<button confirm="cancel" action="cancel" transition="spouse">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>Ressources du demandeur</title>
				<form>/social/domestichelp/resources/display</form>
				<button transition="subject" action="">Modifier</button>
				<button type="next" default="true" action="" transition="displayspouse">Page suivante</button>
			</state>
			
			<state name="displayspouse" mode="static">
				<title>Ressources du conjoint</title>
				<form>/social/domestichelp/resources/displayspouse</form>
				<button transition="spouse" action="">Modifier</button>
			</state>

		</stage>
		
		<stage name="Patrimony" caption="Patrimoine" stagemenu="display" required="false">
			<title>Patrimoine</title>
			<info>Renseignements sur le patrimoine du foyer</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer ces informations sur le patrimoine ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles seront perdu ! Voulez-vous continuer ?</confirm>

			<default>patrimony</default>
			<next/>
			
			<state name="patrimony">
				<title>Patrimoine</title>
				<form>/social/domestichelp/patrimony/patrimony</form>
			</state>

			<state name="assets" change="confirm">
				<title force="true">Biens immobiliers</title>
				<form>/social/domestichelp/patrimony/assets</form>
				<button confirm="cancel" action="" transition="assets">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="save&amp;list=list(assets)" transition="displayassets">Enregistrer</button>
			</state>

			<state name="displayassets" mode="static">
				<title force="true">Biens immobiliers</title>
				<form>/social/domestichelp/patrimony/displayassets</form>
				<button confirm="delete" action="del&amp;list=list(assets)" transition="patrimony">Supprimer</button>
				<button transition="assets" action="">Modifier</button>
			</state>

			<state name="notrealasset" change="confirm">
				<title force="true">Biens partage, donation ou vente</title>
				<form>/social/domestichelp/patrimony/notrealasset</form>
				<button confirm="cancel" action="" transition="notrealasset">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="save&amp;list=list(notrealasset)" transition="displaynotrealasset">Enregistrer</button>
			</state>

			<state name="displaynotrealasset" mode="static">
				<title force="true">Biens</title>
				<form>/social/domestichelp/patrimony/displaynotrealasset</form>
				<button confirm="delete" action="del&amp;list=list(notrealasset)" transition="patrimony">Supprimer</button>
				<button transition="notrealasset" action="">Modifier</button>
			</state>

			<select name="fr.cg95.cvq.fo.common.Request" property="list(assets)" state="all">
				<title>Biens immobiliers (jagr)</title>
				<display type="document"/>
				<display name="realAssetsRealAssetAddressStreetNumber"/>
				<display name="realAssetsRealAssetAddressStreetNumber"/>
				<display name="realAssetsRealAssetAddressStreetName"/>
				<display name="realAssetsRealAssetAddressPostalCode"/>
				<display name="realAssetsRealAssetAddressCity"/>
				<action confirm="changed" parameter="index" transition="displayassets">get&amp;list=list(assets)</action> 
			</select>

			<select name="fr.cg95.cvq.fo.common.Request" property="list(notrealasset)" state="all">
				<title>Biens partage, donation ou vente</title>
				<display type="document"/>
				<display name="notRealAssetsAssetType"/>
				<display name="notRealAssetsAssetKind"/>
				<display name="notRealAssetsAssetAddressStreetNumber"/>
				<display name="notRealAssetsAssetAddressStreetName"/>
				<display name="notRealAssetsAssetAddressPostalCode"/>
				<display name="notRealAssetsAssetAddressCity"/>
				<action confirm="changed" parameter="index" transition="displaynotrealasset">get&amp;list=list(notrealasset)</action> 
			</select>

			<menu state="patrimony">
				<title>Nature du patrimoine</title>
				<button transition="assets" action="new&amp;list=list(assets)" >Biens immobilier</button>
				<button transition="notrealasset" action="new&amp;list=list(notrealasset)" >Biens partage, donation ou vente</button>
			</menu>
		</stage>
		
		<stage name="Capitaltaxes" caption="Imposition" stagemenu="display">
			<title>Imposition</title>

			<info>Renseignements sur l'imposition du foyer</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>

			<default>capital</default>
			<next/>
			
			<state name="capital" change="confirm">
				<title>Montant d'imposition</title>
				<form>/social/domestichelp/capitaltaxes/capital</form>
				<button confirm="cancel" action="cancel" transition="capital">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>Montant d'imposition</title>
				<form>/social/domestichelp/capitaltaxes/displaycapital</form>
				<button transition="capital" action="">Modifier</button>
			</state>

		</stage>
		
		

	    <!-- ******************* AJOUT JUSTIFICATIFS *********************-->		
		<stage ref="Documents"/>
		
		<!-- ******************* VALIDATION *********************-->	
		<stage name="Validation" caption="Validation" stagemenu="display">
			<title>Validation et fin</title>
			<info>Résumé des informations fournies. A valider pour la création de votre demande</info>

			<default>summary</default>

			<next>false</next>
			
			<state name="summary" mode="static">
				<form>/social/domestichelp/validation/summaryrequestkind</form>
				<form>/social/domestichelp/validation/summaryfamilyreferent</form>
				<form>/social/domestichelp/validation/summarysubject</form>
				<form>/social/domestichelp/validation/summarytutor</form>
				<form condition="requesterHasSpouse==True">/social/domestichelp/validation/summaryspouse</form>
				<form>/social/domestichelp/validation/summarycurrentdwelling</form>
				<form>/social/domestichelp/validation/summarypreviousdwelling</form>
				<form>/social/domestichelp/validation/summarysubjectincomes</form>
				<form condition="requesterHasSpouse==True">/social/domestichelp/validation/summaryspouseincomes</form>
				<form>/social/domestichelp/validation/summaryrealassets</form>
				<form>/social/domestichelp/validation/summarynotrealassets</form>
				<form>/social/domestichelp/validation/summarytaxesAmount</form>
				<form>/common/validation/documents</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
			</state>

			<state name="validation">
				<form>/common/validation/validation</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="save" script="validateRequest()">Enregistrer</button>
			</state>

			<state name="print" buttonArea="none" mode="noreturn">
				<form>/common/validation/print</form>
			</state>

		</stage>

	</process>

	<!--****************** PROCESSUS DEMANDE DE COMPENSATION DU HANDICAP *******************-->
	<process name="eHandicapAllowance" caption="Compensation du handicap" subject="true" time="5">
		<title>Compensation du handicap</title>
		<package>fr.cg95.cvq.fo.social.handicapallowance</package>
        <persistence>fr.cg95.cvq.fo.social.HandicapAllowancePersistence</persistence>

	    <!-- ******************* DEMANDEUR *********************-->
		<stage name="Subject" caption="Personne concernée">
			<title>Informations administratives de la personne concernée</title>
			<info>Renseignements sur la personne concernée par la demande</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer les informations sur le demandeur?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>

			<default>default</default>
			<next/>
			
			<state name="default" buttonArea="nonavigation" mode="static">
				<title>La personne concernée</title>
				<form>/social/handicapallowance/subject/default</form>
			</state>

			<state name="subject">
				<title>La personne concernée</title>
				<form>/social/handicapallowance/subject/subject</form>
				<button confirm="cancel" action="" transition="subject">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>La personne concernée</title>
				<form>/social/handicapallowance/subject/display</form>
			</state>

			<select name="familyHome" property="selectionListWithoutCurrent" state="default">
				<title>Personne(s) du compte</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="display">createRequest</action> 
			</select>		

			<select name="familyHome" property="individualToRegister" state="all" >
				<title>La personne concernée</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="display">processStage</action> 
			</select>

		</stage>
		
		<stage name="Needs" caption="Souhaits et Besoins" stagemenu="display" required="false">
			<title>Souhaits et Besoins</title>
			<info>Renseignements sur les souhaits et besoins de la personne permettant d'élaborer le plan de compensation le plus adapté possible</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer les informations sur le demandeur?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>

			<default>needs</default>
			<next/>

			<state name="needs">
				<title>Souhaits et Besoins</title>
				<form>/social/handicapallowance/needs/needs</form>
				<button confirm="cancel" action="" transition="needs">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>Souhaits et Besoins</title>
				<form>/social/handicapallowance/needs/display</form>
				<button transition="needs" action="">Modifier</button>
			</state>

		</stage>
		
		<stage name="Help" caption="Aide" stagemenu="display" required="false">
			<title>Aide à la formulation</title>
			<info>Renseignements complémentaires, si vous avez bénéficié de l'assistance d'une tierce personne pour la formulation des besoins</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer les informations sur le demandeur?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>

			<default>help</default>
			<next/>

			<state name="help">
				<title>Aide à la formulation</title>
				<form>/social/handicapallowance/help/help</form>
				<button confirm="cancel" action="" transition="help">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>Aide à la formulation</title>
				<form>/social/handicapallowance/help/display</form>
				<button transition="help" action="">Modifier</button>
			</state>

		</stage>
		
		<stage name="Legal" caption="Représentant légal" stagemenu="display" required="false">
			<title>Représentant légal</title>
			<info>Renseignements sur le représentant légal de la personne concernée par la demande</info>

			<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer les informations sur le demandeur?</confirm>
			<confirm name="continue" check="">Vous devez enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>

			<default>legal</default>
			<next/>

			<state name="legal">
				<title>Représentant légal</title>
				<form>/social/handicapallowance/legal/legal</form>
				<button confirm="cancel" action="" transition="legal">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>

			<state name="display" mode="static">
				<title>Représentant légal</title>
				<form>/social/handicapallowance/legal/display</form>
				<button transition="legal" action="">Modifier</button>
			</state>

		</stage>
		
	    <!-- ******************* AJOUT JUSTIFICATIFS *********************-->		
		<stage ref="Documents"/>
		
		<!-- ******************* VALIDATION *********************-->	
		<stage name="Validation" caption="Validation" stagemenu="display">
			<title>Validation et fin</title>
			<info>Résumé des informations fournies. A valider pour la création de votre demande</info>

			<default>summary</default>

			<next>false</next>
			
			<state name="summary" mode="static">
				<form>/common/validation/requester</form>
				<form>/social/handicapallowance/validation/summary</form>
				<form>/common/validation/documents</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
			</state>

			<state name="validation">
				<form>/common/validation/validation</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="save" script="validateRequest()">Enregistrer</button>
			</state>

			<state name="print" buttonArea="none" mode="noreturn">
				<form>/common/validation/print</form>
			</state>

		</stage>
	</process>
  </processes>		
</cvqprocess>