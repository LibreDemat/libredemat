<?xml version="1.0" encoding="UTF-8"?>
<cvqprocess xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="processes.xsd">
	<processes group="technical" caption="Service technique" order="9">

		<process name="eTechnicalIntervention" caption="Intervention technique" time="5">
			<title>Demande d'intervention technique</title>
			<package>fr.cg95.cvq.fo.technical</package>
			<persistence>fr.cg95.cvq.fo.technical.TechnicalInterventionPersistence</persistence>

			<!-- Demandeur -->
			<stage name="Subject" caption="Personne à inscrire">

				<title>Personne à inscrire</title>
				<info>Selection de la personne</info>

				<confirm name="changed" check="state">Vos modifications éventuelles seront perdu ! Voulez-vous continuer ?</confirm>
				<confirm name="cancel">Attention ! les données de la demande n'ont pas été enregistrées</confirm>
				<confirm name="delete">Voules-vous vraiement supprimer les informations sur la demande</confirm>
				<confirm name="terminate">Voulez-vous vraiement abandonner</confirm>
				<confirm name="continue" check="">Vous devez selectionner une personne</confirm>

				<default>default</default>
				<previous confirm="terminate">endProcess</previous>
				<next confirm="continue" />

				<state name="default">
					<title>Le demandeur</title>
					<form>/technical/subject/default</form>
				</state>
				<state name="subject">
					<title>Le demandeur</title>
					<form>/technical/subject/subject</form>
					<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
					<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
				</state>
				<state name="display" mode="static">
					<title>Le demandeur</title>
					<form>/technical/subject/display</form>
					<button confirm="delete" action="resetProcess" transition="default">Supprimer</button>
					<button action="" transition="subject">Modifier</button>
				</state>
				<select name="familyHome" property="selectionListWithoutCurrent" state="default" >
					<title>Adulte(s) du compte</title>
					<display type="people"/>
					<display name="firstName"/>
					<display name="lastName"  initial="true"/>
					<action confirm="changed" parameter="index" transition="subject">createRequest</action>
				</select>
				<select name="familyHome" property="individualToRegister" state="all">
					<title>Adulte à inscrire</title>
					<display type="people"/>
					<display name="firstName"/>
					<display name="lastName"  initial="true"/>
					<action parameter="index" transition="display">processStage</action>
				</select>
			</stage>

			<!-- type d'intervention -->
			<stage name="Type" caption="Type d'intervention" stagemenu="display">
				<title>Quel est le type de la demande</title>
				<info>Définition du type de la demande</info>
				<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
				<default>default</default>
				<next script="processSubmit" action=""/>

				<state name="default" change="confirm">
					<title>Type de demande d'intervention</title>
					<form>/technical/type/type</form>
					<button confirm="cancel" action="" transition="default">Annuler Saisie</button>
					<button default="true" script="processSubmit" action="next">Enregistrer</button>
				</state>

			</stage>

			<!-- Document -->
			<stage ref="Documents"/>

			<!-- Lieu d'intervention -->
			<stage name="Place" caption="Lieu de l'intervention" stagemenu="display">
				<title>Quel est le lieu de l'intervention</title>
				<info>Définition du lieu de l'intervention</info>
				<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
				<default>default</default>
				<next script="processSubmit" action=""/>

				<state name="default" change="confirm">
					<title>Lieu d'intervention</title>
					<form>/technical/place/place</form>
					<button confirm="cancel" action="" transition="default">Annuler Saisie</button>
					<button default="true" script="processSubmit" action="next">Enregistrer</button>
				</state>
			</stage>

			<!-- Description de l'intervention -->
			<stage name="Description" caption="Description de l'intervention" stagemenu="display">
				<title>Description de l'intervention</title>
				<info>Description précise de la demande</info>
				<confirm name="cancel">Attention ! Les données de la demande n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
				<default>default</default>
				<next script="processSubmit" action=""/>

				<state name="default" change="confirm">
					<title>Description de l'intervention</title>
					<form>/technical/description/description</form>
					<button confirm="cancel" action="" transition="default">Annuler Saisie</button>
					<button default="true" script="processSubmit" action="next">Enregistrer</button>
				</state>
			</stage>

			<!-- Validation -->
			<stage name="Validation" caption="Validation" stagemenu="display">
				<title>Validation</title>
				<info>Résumé des informations fournies. A valider pour la création de votre demande</info>

				<default>summary</default>

				<next>false</next>

				<state name="summary" mode="static">
					<form>/common/validation/requester</form>
					<form>/technical/validation/summary</form>
					<button type="quit" script="cancelRequest()">Annuler la demande</button>
					<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
				</state>
				<state name="validation">
					<form>/common/validation/validation</form>
					<button type="quit" script="cancelRequest()">Annuler la demande</button>
					<button type="save" script="validateRequest()">Enregistrer</button>
				</state>
				<state name="trace">
					<form>/common/validation/trace</form>
					<button type="quit" script="cancelRequest()">Annuler la demande</button>
					<button type="save" script="validateRequest()">Enregistrer</button>
				</state>
				<state name="print" buttonArea="none" mode="noreturn">
					<form>/common/validation/print</form>
				</state>
			</stage>
		</process>

	</processes>
</cvqprocess>
