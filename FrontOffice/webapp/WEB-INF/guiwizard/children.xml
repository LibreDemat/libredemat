<?xml version="1.0" encoding="UTF-8" ?>

<cvqprocess xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	 xsi:noNamespaceSchemaLocation="processes.xsd" >

  <processes group="children" caption="Scolaire" order="1">
	<!--****************** PROCESSUS INSCRIPTION SCOLAIRE *******************-->
	<process name="eSchool" caption="Inscription à l'école" time="3">
		<title>Inscription scolaire</title>
		<confirm name="familyHome" check="hasOpenSeasons">L'inscription pour la saison est fermée.</confirm>
		<confirm name="familyHome" check="hasAuthorizedSubjects">Vous n'avez aucun enfant à inscrire.</confirm>
		<package>fr.cg95.cvq.fo.school</package>
        <persistence>fr.cg95.cvq.fo.school.SchoolRegistrationPersistence</persistence>
		<information label="Règlement interne de l'école.">txt/ReglementScolaire.txt</information>
		
	    <!-- ******************* INSCRIPTION ENFANTS *********************-->
		<stage name="Inscription" caption="Inscription" >
			<title>Inscription de l'enfant</title>
			<notice>Vous ne pouvez inscrire qu'un enfant à la fois.</notice>
			<info>Sélection de l'enfant à inscrire et choix des options proposées</info>

			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>
			<confirm name="continue" check="">Vous devez sélectionner un enfant et enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="cancel">Attention ! Les données de l'inscription à l'école n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer l'inscription à l'école de l'enfant sélectionné ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles ou votre enregistrement sera perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
			<previous confirm="terminate">endProcess</previous>
			<next confirm="continue"/>
			
			<state name="default" buttonArea="nonavigation" mode="static">
				<title>Inscription scolaire</title>
				<form>/school/inscription/default</form>
			</state>

			<state name="school" change="confirm">
				<title>Enfant à inscrire</title>
				<form>/school/inscription/school</form>
				<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>
						
			<state name="display" mode="static">
				<title>Enfant à inscrire</title>
				<form>/school/inscription/display</form>
				<button confirm="delete" action="resetProcess" transition="default">Supprimer</button>
				<button transition="school" action="">Modifier</button>
			</state>

			<select name="familyHome" property="selectionListWithoutCurrent" state="default" >
				<title>Enfant(s) non-inscrit(s)</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="school">createRequest</action> 
			</select>
			
			<select name="familyHome" property="individualToRegister" state="all">
				<title>Enfant à inscrire</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="display">processStage</action> 
			</select>		
		</stage>

		<stage ref="Documents"/>
		
		<!-- ******************* REGLEMENTAIRE *********************-->
		<stage name="Rules" caption="Règlementaire" stagemenu="display" >
			<title>Réglementaire</title>
			<info>Informations sur le règlement du service concerné</info>
			<default>default</default>

			<next script="processSubmit" action="" />
			
			<state name="default">
				<title>Réglementaire</title>
				<form>/common/rules/rules</form>
				<form>/school/rules/authorisation</form>
				<button type="cancel" action="" >Annuler Saisie</button>
				<button default="true" script="processSubmit" action="next">Enregistrer</button>
			</state>
		</stage>	
		
		<!-- ******************* VALIDATION *********************-->	
		<stage name="Validation" caption="Validation" stagemenu="display">
			<title>Validation et fin</title>
			<info>Résumé des informations fournies. A valider pour la création de votre demande</info>
		  
			<default>summary</default>

			<next>false</next>
			
			<state name="summary" mode="static">
				<form>/common/validation/requester</form>
				<form>/school/validation/summary</form>
				<form>/common/validation/documents</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
			</state>

			<state name="validation">
				<form>/common/validation/validation</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="save" script="validateRequest()">Enregistrer</button>
			</state>

			<state name="print" buttonArea="none" mode="noreturn">
				<form>/common/validation/print</form>
			</state>

		</stage>

	</process>
	
	<!--******************** PROCESSUS INSCRIPTION RESTAURANT SCOLAIRE **********************-->
	<process name="eSchoolCanteen" caption="Restaurant scolaire" time="3">
		<title>Inscription restaurant scolaire</title>
		<confirm name="familyHome" check="hasOpenSeasons">L'inscription pour la saison est fermée.</confirm>
		<confirm name="familyHome" check="hasAuthorizedSubjects">Vous n'avez aucun enfant à inscrire.</confirm>
		<package>fr.cg95.cvq.fo.schoolcanteen</package>
        <persistence>fr.cg95.cvq.fo.schoolcanteen.SchoolCanteenPersistence</persistence>
		<information label="Règlement du restaurant scolaire.">txt/ReglementCantine.txt</information>

  	    <!-- ******************* INSCRIPTION *********************-->
		<stage name="Inscription" caption="Inscription">
			<title>Inscription</title>
			<notice>Vous ne pouvez inscrire qu'un enfant à la fois.</notice>
			<info>Sélection de l'enfant à inscrire et choix des options proposées</info>

			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>
			<confirm name="continue" check="">Vous devez sélectionner un enfant et enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="cancel">Attention ! Les données de l'inscription au restaurant scolaire n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer l'inscription au restaurant scolaire de l'enfant sélectionné ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles ou votre enregistrement sera perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
			<previous confirm="terminate">endProcess</previous>
			<next confirm="continue"/>
			
			<state name="default" buttonArea="nonavigation" mode="static">
				<title>Inscription restaurant scolaire</title>
				<form>/schoolcanteen/inscription/default</form>
			</state>

			<state name="canteen" change="confirm">
				<title>Enfant à inscrire</title>
				<form>/schoolcanteen/inscription/canteen</form>
				<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="permission">Page suivante</button>
			</state>			

			<state name="permission" change="confirm">
				<title>Enfant à inscrire</title>
				<form>/schoolcanteen/inscription/permission</form>				
				<button script="processSubmit" action="" transition="canteen">Page précédente</button>
				<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>			
		   		
			<state name="display">
				<title>Enfant à inscrire</title>
				<form>/schoolcanteen/inscription/display</form>
				<button confirm="delete" action="resetProcess" transition="default">Supprimer</button>
				<button transition="canteen" action="">Modifier</button>
			</state>			

			<select name="familyHome" property="selectionListWithoutCurrent" state="default" >
				<title>Enfant(s) non-inscrit(s)</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="canteen">createRequest</action> 
			</select>
			
			<select name="familyHome" property="individualToRegister" state="all" >
				<title>Enfant à inscrire</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="display">processStage</action> 
			</select>
		</stage>

	    <!-- ******************* AJOUT JUSTIFICATIFS *********************-->		
		<stage ref="Documents"/>
		
		<!-- ******************* REGLEMENTAIRE *********************-->
		<stage name="Rules" caption="Règlementaire" stagemenu="display" >
			<title>Réglementaire</title>
			<info>Informations sur le règlement du service concerné</info>
			<default>authorisation</default>
			<next script="processSubmit" action="" />
			
			<state name="authorisation">
				<title>Réglementaire</title>
				<form>/common/rules/rules</form>
				<form>/schoolcanteen/rules/authorisation</form>
				<button type="cancel" action="" >Annuler Saisie</button>
				<button default="true" script="processSubmit" action="next">Enregistrer</button>
			</state>
		</stage>	
		
		<!-- ******************* VALIDATION *********************-->	
		<stage name="Validation" caption="Validation" stagemenu="display">
			<title>Validation et fin</title>
			<info>Résumé des informations fournies. A valider pour la création de votre demande</info>
		  
			<default>summary</default>

			<next>false</next>
			
			<state name="summary" mode="static">
				<form>/common/validation/requester</form>
				<form>/schoolcanteen/validation/summary</form>
				<form>/common/validation/documents</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
			</state>

			<state name="validation">
				<form>/common/validation/validation</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="save" script="validateRequest()">Enregistrer</button>
			</state>

			<state name="print" buttonArea="none" mode="noreturn">
				<form>/common/validation/print</form>
			</state>

		</stage>

	</process>

	<!--******************** PROCESSUS INSCRIPTION PERISCOLAIRE ************************-->
	<process name="ePeriSchool" caption="Périscolaire" time="3">
		<title>Périscolaire (garderie)</title>
		<confirm name="familyHome" check="hasOpenSeasons">L'inscription pour la saison est fermée.</confirm>
		<confirm name="familyHome" check="hasAuthorizedSubjects">Vous n'avez aucun enfant à inscrire.</confirm>
		<package>fr.cg95.cvq.fo.perischool</package>
        <persistence>fr.cg95.cvq.fo.perischool.PerischoolActivityPersistence</persistence>
		<information label="Règlement des activités peri-scolaire.">txt/ReglementPeriScolaire.txt</information>

		<!-- *******************INSCRIPTION ENFANT *********************-->
		<stage name="Inscription" caption="Inscription" >
			<title>Inscription de l'enfant</title>
			<notice>Vous ne pouvez inscrire qu'un enfant à la fois.</notice>
			<info>Sélection de l'enfant à inscrire et choix des options proposées</info>

			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>
			<confirm name="continue" check="">Vous devez sélectionner un enfant et enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="cancel">Attention ! Les données de l'inscription aux activités périscolaires n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer l'inscription aux activités périscolaires de l'enfant sélectionné ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles ou votre enregistrement sera perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
			<previous confirm="terminate">endProcess</previous>
			<next confirm="continue"/>
			
			<state name="default" buttonArea="nonavigation" mode="static">
				<title>Inscription périscolaire</title>
				<form>/perischool/inscription/default</form>
			</state>

			<state name="perischool" change="confirm">
				<title>Enfant à inscrire</title>
				<form>/perischool/inscription/perischool</form>
				<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="school">Page suivante</button>
			</state>
			
		    <state name="school" change="confirm">
				<title>Enfant à inscrire</title>
				<form>/perischool/inscription/school</form>
				<button script="processSubmit" action="" transition="perischool">Page précédente</button>
				<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>
			
			<state name="display" mode="static">
				<title>Enfant à inscrire</title>
				<form>/perischool/inscription/display</form>
				<button confirm="delete" action="resetProcess" transition="default">Supprimer</button>
				<button transition="perischool" action="">Modifier</button>
			</state>			
			
			<select name="familyHome" property="selectionListWithoutCurrent" state="default" >
				<title>Enfant(s) non-inscrit(s)</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="perischool">createRequest</action> 
			</select>
			
			<select name="familyHome" property="individualToRegister" state="all">
				<title>Enfant à inscrire</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="display">processStage</action> 
			</select>		
		</stage>
        
        <!-- **************INSCRIPTION PERSONNES A CONTACTER**************-->		
		<stage name="Contact" caption="Personnes à contacter" stagemenu="add" required="false">
			<title>Personnes à contacter</title>
			<info>Renseignements sur les personnes à contacter</info>

			<confirm name="cancel">Attention ! Les données de la personne n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer la personne sélectionnée ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles seront perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
				
			<state name="default" mode="static">
				<title>Ajouter une personne</title>
				<form>/perischool/contact/default</form>
			</state>
			
			<state name="display" mode="static">
				<title>Consulter une personne</title>
				<form>/perischool/contact/display</form>
				<button confirm="delete" action="del&amp;stage=end" transition="default">Supprimer</button>
				<button transition="contact" action="">Modifier</button>
			</state>
			
			<state name="contact" change="confirm">
				<title>Ajouter une personne</title>
				<form>/perischool/contact/contact</form>
				<button confirm="cancel" action="" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="save" transition="display">Enregistrer</button>
			</state>
											
			<select name="fr.cg95.cvq.fo.common.Request" property="list(contact)" state="all">
				<title>Personnes à contacter</title>
				<display type="people"/>
				<display name="otherIndividualFirstName"/>
				<display name="otherIndividualLastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="display">get</action> 
				<button confirm="changed" action="new" transition="contact">Ajouter une personne</button>
			</select>
		</stage>
		
		<!-- ************* INSCRIPTION PERSONNES AUTORISEES ************-->
		<stage name="Authorized" caption="Personnes autorisées" stagemenu="add" required="false" >
			<title>Personnes autorisées</title>
			<info>Renseignements sur les personnes autorisées à venir chercher l'enfant</info>

			<confirm name="cancel">Attention ! Les données de la personne n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer la personne sélectionnée ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles seront perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
				
			<state name="default" mode="static">
				<title>Ajouter une personne</title>
				<form>/perischool/authorized/default</form>
			</state>
			
			<state name="display" mode="static">
				<title>Consulter une personne</title>
				<form>/perischool/authorized/display</form>
				<button confirm="delete" action="del&amp;stage=end" transition="default">Supprimer</button>
				<button transition="person" action="">Modifier</button>
			</state>
			
			<state name="person" change="confirm">
				<title>Ajouter une personne</title>
				<form>/perischool/authorized/person</form>
				<button confirm="cancel" action="" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="save" transition="display">Enregistrer</button>
			</state>		
									
			<select name="fr.cg95.cvq.fo.common.Request" property="list(authorized)" state="all">
				<title>Personnes autorisées</title>
				<display type="people"/>
				<display name="otherIndividualFirstName"/>
				<display name="otherIndividualLastName" initial="true"/>
				<action confirm="changed" parameter="index" transition="display">get</action> 
				<button confirm="changed" action="new" transition="person">Ajouter une personne</button>
			</select>
		</stage>
		
		<!-- ******************* AJOUT JUSTIFICATIFS *********************-->
		<stage ref="Documents"/>
		
		<!-- ******************* REGLEMENTAIRE ******************-->
		<stage name="Rules" caption="Règlementaire" stagemenu="display" >
			<title>Réglementaire</title>
			<info>Informations sur le règlement du service concerné</info>
			<default>authorisation</default>
			<next script="processSubmit" action="" />
			
			<state name="authorisation">
				<title>Réglementaire</title>
				<form>/common/rules/rules</form>
				<form>/perischool/rules/authorisation</form>
				<button type="cancel" action="" >Annuler Saisie</button>
				<button default="true" script="processSubmit" action="next">Enregistrer</button>
			</state>
		</stage>

		<!-- ******************* VALIDATION *********************-->	
		<stage name="Validation" caption="Validation" stagemenu="display">
			<title>Validation et fin</title>
			<info>Résumé des informations fournies. A valider pour la création de votre demande</info>
		  
			<default>summary</default>

			<next>false</next>
			
			<state name="summary" mode="static">
				<form>/common/validation/requester</form>
				<form>/perischool/validation/summary</form>
				<form>/common/validation/documents</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
			</state>

			<state name="validation">
				<form>/common/validation/validation</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="save" script="validateRequest()">Enregistrer</button>
			</state>

			<state name="print" buttonArea="none" mode="noreturn">
				<form>/common/validation/print</form>
			</state>

		</stage>

	</process>
	
	<!--******************** PROCESSUS INSCRIPTION CENTRE DE LOISIRS ************************-->
	<process name="eRecreation" caption="Centre de loisirs" time="3">
		<title>Centre de loisirs</title>
		<confirm name="familyHome" check="hasOpenSeasons">L'inscription pour la saison est fermée.</confirm>
		<confirm name="familyHome" check="hasAuthorizedSubjects">Vous n'avez aucun enfant à inscrire.</confirm>
		<package>fr.cg95.cvq.fo.school.recreation</package>
        <persistence>fr.cg95.cvq.fo.school.RecreationActivityPersistence</persistence>
		<information label="Règlement du centre de loisirs.">txt/ReglementCentreDeLoisir.txt</information>

		<!-- *******************INSCRIPTION ENFANT *********************-->
		<stage name="Inscription" caption="Inscription" >
			<title>Inscription de l'enfant</title>
			<notice>Vous ne pouvez inscrire qu'un enfant à la fois.</notice>
			<info>Sélection de l'enfant à inscrire et choix des options proposées</info>

			<confirm name="terminate">Voulez-vous vraiment abandonner ?</confirm>
			<confirm name="continue" check="">Vous devez sélectionner un enfant et enregistrer la page avant de passer à l'étape suivante</confirm>
			<confirm name="cancel">Attention ! Les données de l'inscription aux activités n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer l'inscription aux activités de l'enfant sélectionné ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles ou votre enregistrement sera perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
			<previous confirm="terminate">endProcess</previous>
			<next confirm="continue"/>
			
			<state name="default" buttonArea="nonavigation" mode="static">
				<title>Inscription à un centre de loisirs</title>
				<form>/school/recreation/inscription/default</form>
			</state>

			<state name="recreation" change="confirm">
				<title>Enfant à inscrire</title>
				<form>/school/recreation/inscription/recreation</form>
				<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="school">Page suivante</button>
			</state>
			
		    <state name="school" change="confirm">
				<title>Enfant à inscrire</title>
				<form>/school/recreation/inscription/school</form>
				<button script="processSubmit" action="" transition="recreation">Page précédente</button>
				<button confirm="cancel" action="resetProcess" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="" transition="display">Enregistrer</button>
			</state>
			
			<state name="display" mode="static">
				<title>Enfant à inscrire</title>
				<form>/school/recreation/inscription/display</form>
				<button confirm="delete" action="resetProcess" transition="default">Supprimer</button>
				<button transition="recreation" action="">Modifier</button>
			</state>			
			
			<select name="familyHome" property="selectionListWithoutCurrent" state="default" >
				<title>Enfant(s) non-inscrit(s)</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="recreation">createRequest</action> 
			</select>
			
			<select name="familyHome" property="individualToRegister" state="all" >
				<title>Enfant à inscrire</title>
				<display type="people"/>
				<display name="firstName"/>
				<display name="lastName"  initial="true"/>
				<action parameter="index" transition="display">processStage</action> 
			</select>		
		</stage>
        
        <!-- **************INSCRIPTION PERSONNES A CONTACTER**************-->		
		<stage name="Contact" caption="Personnes à contacter" stagemenu="add" required="false" >
			<title>Personnes à contacter</title>
			<info>Renseignements sur les personnes à contacter</info>

			<confirm name="cancel">Attention ! Les données de la personne n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer la personne sélectionnée ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles seront perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
				
			<state name="default" mode="static">
				<title>Ajouter une personne</title>
				<form>/school/recreation/contact/default</form>
			</state>
			
			<state name="display" mode="static">
				<title>Consulter une personne</title>
				<form>/school/recreation/contact/display</form>
				<button confirm="delete" action="del&amp;stage=end" transition="default">Supprimer</button>
				<button transition="contact" action="">Modifier</button>
			</state>
			
			<state name="contact" change="confirm">
				<title>Ajouter une personne</title>
				<form>/school/recreation/contact/contact</form>
				<button confirm="cancel" action="" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="save" transition="display">Enregistrer</button>
			</state>
											
			<select name="fr.cg95.cvq.fo.common.Request" property="list(contact)" state="all" >
				<title>Personnes à contacter</title>
				<display type="people"/>
				<display name="otherIndividualFirstName"/>
				<display name="otherIndividualLastName"  initial="true"/>
				<action confirm="changed" parameter="index" transition="display">get</action> 
				<button confirm="changed" action="new" transition="contact">Ajouter une personne</button>
			</select>
		</stage>
		
		<!-- ************* INSCRIPTION PERSONNES AUTORISEES ************-->
		<stage name="Authorized" caption="Personnes autorisées" stagemenu="add" required="false" >
			<title>Personnes autorisées</title>
			<info>Renseignements sur les personnes autorisées à venir chercher l'enfant</info>

			<confirm name="cancel">Attention ! Les données de la personne n'ont pas été enregistrées ! Voulez-vous quand même annuler la saisie ?</confirm>
			<confirm name="delete">Voulez-vous vraiment supprimer la personne sélectionnée ?</confirm>
			<confirm name="changed" check="state">Vos modifications éventuelles seront perdu ! Voulez-vous continuer ?</confirm>

			<default>default</default>
				
			<state name="default" mode="static">
				<title>Ajouter une personne</title>
				<form>/school/recreation/authorized/default</form>
			</state>
			
			<state name="display" mode="static">
				<title>Consulter une personne</title>
				<form>/school/recreation/authorized/display</form>
				<button confirm="delete" action="del&amp;stage=end" transition="default">Supprimer</button>
				<button transition="person" action="">Modifier</button>
			</state>
			
			<state name="person" change="confirm">
				<title>Ajouter une personne</title>
				<form>/school/recreation/authorized/person</form>
				<button confirm="cancel" action="" transition="default">Annuler Saisie</button>
				<button default="true" script="processSubmit" action="save" transition="display">Enregistrer</button>
			</state>		
									
			<select name="fr.cg95.cvq.fo.common.Request" property="list(authorized)" state="all" >
				<title>Personnes autorisées</title>
				<display type="people"/>
				<display name="otherIndividualFirstName"/>
				<display name="otherIndividualLastName" initial="true"/>
				<action confirm="changed" parameter="index" transition="display">get</action> 
				<button confirm="changed" action="new" transition="person">Ajouter une personne</button>
			</select>
		</stage>
		
		<!-- ******************* AJOUT JUSTIFICATIFS *********************-->
		<stage ref="Documents"/>
		
		<!-- ******************* REGLEMENTAIRE ******************-->
		<stage name="Rules" caption="Règlementaire" stagemenu="display" >
			<title>Réglementaire</title>
			<info>Informations sur le règlement du service concerné</info>
			<default>authorisation</default>
			<next script="processSubmit" action="" />
			
			<state name="authorisation">
				<title>Réglementaire</title>
				<form>/common/rules/rules</form>
				<form>/school/recreation/rules/authorisation</form>
				<button type="cancel" action="" >Annuler Saisie</button>
				<button default="true" script="processSubmit" action="next">Enregistrer</button>
			</state>
		</stage>

		<!-- ******************* VALIDATION *********************-->	
		<stage name="Validation" caption="Validation" stagemenu="display">
			<title>Validation et fin</title>
			<info>Résumé des informations fournies. A valider pour la création de votre demande</info>
		  
			<default>summary</default>

			<next>false</next>
			
			<state name="summary" mode="static">
				<form>/common/validation/requester</form>
				<form>/school/recreation/validation/summary</form>
				<form>/common/validation/documents</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="next" default="true" script="processSubmit" action="" transition="validation">Page suivante</button>
			</state>

			<state name="validation">
				<form>/common/validation/validation</form>
				<button type="quit" script="cancelRequest()">Annuler la demande</button>
				<button type="save" script="validateRequest()">Enregistrer</button>
			</state>

			<state name="print" buttonArea="none" mode="noreturn">
				<form>/common/validation/print</form>
			</state>

		</stage>

	</process>
		
  </processes>		
</cvqprocess>

