<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
                               "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
  <data-sources/>

  <form-beans>
    <form-bean name="documentForm" type="fr.cg95.cvq.fo.common.form.DocumentForm"/>
    <form-bean name="loginForm" type="fr.cg95.cvq.fo.common.form.LoginForm"/>
  </form-beans>
  
  <global-exceptions>
    <exception 
      key="error.key"
      type="java.lang.Exception" 
      path="/error.jsp"
      handler="fr.cg95.cvq.util.web.struts.CvqExceptionHandler"/>
  </global-exceptions>

  <global-forwards/>

  <action-mappings>
    <action validate="false" name="loginForm" path="/loginAction" scope="request" type="fr.cg95.cvq.fo.personal.action.login.LoginAction">
      <forward name="failure" path="/assets/common/jsp/welcome.jsp"/>
      <forward name="authentify" path="/personal/authentify.jsp"/>
      <forward name="reset" path="/assets/common/jsp/welcome.jsp"/>
      <forward name="update" path="/personal/writeCard.jsp"/>
    </action>

	<action path="/personal_displayLoginAction" scope="request" type="fr.cg95.cvq.fo.personal.action.login.DisplayLoginAction">
	  <forward name="login" path="/assets/common/jsp/login.jsp"/>
	  <forward name="authentify" path="/personal/authentify.jsp"/>
	</action>

    <action validate="false" path="/cardAction" scope="request" type="fr.cg95.cvq.fo.personal.action.login.CardAction">
      <forward name="read" path="/personal/login.jsp"/>
      <forward name="write" path="/personal/writeCard.jsp"/>
    </action>

    <action name="loginForm" validate="false" path="/changePassword" scope="request" type="fr.cg95.cvq.fo.personal.action.ChangePasswordAction"/>

    <action name="loginForm" validate="false" path="/resetPasswordAction" scope="request" type="fr.cg95.cvq.fo.personal.action.login.ResetPasswordAction">
      <forward name="login" path="/assets/common/jsp/welcome.jsp"/>
      <forward name="processlogin" path="/newgui/common/presentation/presentation.jsp"/>
    </action>

	<action path="/displayServicesAction" scope="request" type="fr.cg95.cvq.fo.common.action.DisplayServicesAction"/>

	<action path="/keepFolderAction" scope="request" type="fr.cg95.cvq.fo.personal.action.KeepFolderAction"/>

    <action path="/startRequest" scope="request" type="fr.cg95.cvq.fo.common.action.StartRequestAction">
      <forward name="presentation" path="/newgui/common/presentation/presentation.jsp"/>
      <forward name="private" path="/managerWizard.do"/>
    </action>
    
    <action path="/loginProcessAction" validate="false" name="loginForm" scope="request" type="fr.cg95.cvq.fo.common.action.LoginProcessAction">
      <forward name="presentation" path="/newgui/common/presentation/presentation.jsp"/>
      <forward name="reset" path="/newgui/common/presentation/presentation.jsp"/>
    </action>

    <action path="/createRequest" scope="request" type="fr.cg95.cvq.fo.common.action.CreateRequestAction"/>
    <action path="/validateRequest" scope="request" type="fr.cg95.cvq.fo.common.action.ValidateRequestAction"/>
    <action path="/resetProcess" scope="request" type="fr.cg95.cvq.fo.common.action.ResetProcessAction"/>
    <action path="/closeSession" scope="request" type="fr.cg95.cvq.fo.common.action.CloseSessionAction">
      <forward name="close" path="/assets/common/jsp/close.jsp"/>
      <forward name="success" path="/assets/common/jsp/welcome.jsp"/>
    </action>
    <action path="/endProcess" scope="request" type="fr.cg95.cvq.fo.common.action.EndProcessAction">
      <forward name="closeSession" path="/closeSession.do"/>
    </action>
    
    <action path="/printRequestAction" scope="request" type="fr.cg95.cvq.fo.common.action.PrintRequestAction">
      <forward name="popup" path="/redirect.jsp" redirect="false"/>
    </action>
    
    <action path="/personalPrintAction" scope="request" type="fr.cg95.cvq.fo.personal.action.PersonalPrintAction">
      <forward name="popup" path="/redirect.jsp" redirect="false"/>
    </action>
    
    <action path="/uploadDocumentAction" name="documentForm" validate="false" scope="request" type="fr.cg95.cvq.fo.common.action.justification.UploadDocumentAction"/>
    <action path="/showDocumentAction" scope="request" type="fr.cg95.cvq.fo.common.action.justification.ShowDocumentAction"/>
    <action path="/removeDocumentAction" scope="request" type="fr.cg95.cvq.fo.common.action.justification.RemoveDocumentAction"/>
    <action path="/addPageToDocumentAction" scope="request" type="fr.cg95.cvq.fo.common.action.justification.AddPageToDocumentAction"/>
    <action path="/removePageFromDocumentAction" scope="request" type="fr.cg95.cvq.fo.common.action.justification.RemovePageFromDocumentAction"/>
    <action path="/showCurrentPageDocumentAction" scope="request" type="fr.cg95.cvq.fo.common.action.justification.ShowCurrentPageDocumentAction"/>
    
    <action path="/selectDocuments" scope="request" type="fr.cg95.cvq.fo.common.justification.SelectDocumentsAction"/>

    <action path="/displayDocumentsAction" scope="request" type="fr.cg95.cvq.fo.personal.action.DisplayDocumentsAction"/>
    <action path="/documentDisplayAction" scope="request" type="fr.cg95.cvq.fo.personal.action.DocumentDisplayAction"/>
    <action path="/documentDisplayPageAction" scope="request" type="fr.cg95.cvq.fo.personal.action.DocumentDisplayPageAction"/>

	<action path="/placeReservationAction" scope="request" type="fr.cg95.cvq.fo.referential.PlaceReservationAction"/>
	<action path="/referentialAction" scope="request" type="fr.cg95.cvq.fo.referential.ReferentialAction"/>

    <action path="/personal_showAdultAction" scope="request" type="fr.cg95.cvq.fo.personal.action.ShowAdultAction"/>
    <action path="/personal_showChildAction" scope="request" type="fr.cg95.cvq.fo.personal.action.ShowChildAction"/>
    <action path="/personal_showChildCountsAction" scope="request" type="fr.cg95.cvq.fo.personal.action.ShowChildCountsAction"/>

    <action path="/autoSuggest" scope="request" type="fr.cg95.cvq.fo.remote.AutoSuggestAction"/>

    <action path="/requestServiceAction" scope="request" type="fr.cg95.cvq.fo.services.action.RequestServiceAction">
      <forward name="success" path="/closeSession.do" redirect="false"/>
    </action>
    <action path="/personalContextServiceAction" scope="request" type="fr.cg95.cvq.fo.services.action.PersonalContextServiceAction"/>

	<!-- payment -->
	<action path="/accounts" type="fr.cg95.cvq.fo.account.action.DisplayAccountsAction"/>
	<action path="/purchase" type="fr.cg95.cvq.fo.account.action.PurchaseAction"/>
	<action path="/pay" type="fr.cg95.cvq.fo.account.action.PayAllAction"/>
	<action path="/statement" type="fr.cg95.cvq.fo.account.action.StatementAction"/>

	<action path="/paymentResult" type="fr.cg95.cvq.fo.account.action.PaymentResultAction">
      <forward name="redirect" path="/redirect.jsp" redirect="false"/>
	</action>
	<action path="/paymentNoCommit" type="fr.cg95.cvq.fo.account.action.PaymentNoCommitAction">
      <forward name="redirect" path="/redirect.jsp" redirect="false"/>
	</action>
  </action-mappings>

  <message-resources null="false" parameter="application"/>

  <plug-in className="fr.cg95.cvq.wizard.process.ProcessWizardPlugin">
    <set-property property="directory" 
    	value="/WEB-INF/guiwizard"/>
  </plug-in>

  <plug-in className="fr.cg95.cvq.wizard.manager.ManagerWizardPlugin">
    <set-property property="files" value="/WEB-INF/guiwizard/managers.xml"/>
    <set-property property="template" value="account"/>
    <set-property property="tags" value="accounttags"/>
  </plug-in>
</struts-config>
