<?xml version="1.0" encoding="UTF-8" ?>

<cvqmanager xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
			xsi:noNamespaceSchemaLocation="managers.xsd" >
					
  <globals>
	<session data="stateManager" type="fr.cg95.cvq.bo.manager.StateManager" />
	<defaultaction type="fr.cg95.cvq.bo.action.DefaultAction" />
	<timeout delay="60" href="logoutAction.do" />
  <style>css/layout.css</style>
  <style>css/common.css</style>
  <style>css/content.css</style>
  <style>js/jscalendar/skins/aqua/theme.css</style>
  <style>css/ie6.css</style>
  <style>css/ie7.css</style>
<!--   <style>css/stylebo.css</style> -->
<!-- 	<style>css/backoffice.css</style> -->
	<script src="js/account.js" />
  <script src="js/utils.js" />
  <script src="js/jscalendar/calendar.js" />
  <script src="js/jscalendar/lang/calendar-fr.js" />
  <script src="js/jscalendar/calendar-setup.js" />
  </globals>
  
  <managers>
	<manager name="request">
		<title>Gestion des demandes</title>
		
		<tab caption="Recherche">
			<title>Rechercher une demande</title>
			<action>navigationAction.do</action>
			<header separator="bottom">/jsp/bo/request/requestsearch</header>
			<form separator="top">/jsp/bo/service/displayresults</form>
		</tab>
		<tab caption="Formulaire" id="instruction" >
			<title>Traiter une demande</title>
			<condition name="stateManager" property="selectedRecord" />
<!-- 			<style>css/columns.css</style> -->
			<header>/jsp/bo/process/displayheader</header>
			<process state="display" check="processName" />
			<footer>/jsp/bo/process/displayfooter</footer>
		</tab>
		<tab caption="Justificatifs" id="instruction" >
			<title>Verifier les justificatifs</title>
			<condition name="stateManager" property="selectedRecord" />
			<form>/jsp/bo/request/requestdocument</form>
		</tab>
		<tab caption="Instruire" id="instruction" >
			<title>Instruction d'une demande</title>
			<condition name="stateManager" property="selectedRecord" />
			<header>/jsp/bo/process/checkheader</header>
			<process state="check" check="processName" />
			<footer>/jsp/bo/process/checkfooter</footer>
		</tab>
		<tab caption="Délivrer" id="delivery" >
			<title>Délivrance d'une demande</title>
			<condition name="stateManager" property="selectedRecord" />
			<header>/jsp/bo/process/printheader</header>
			<process state="print" check="processName" />
			<footer>/jsp/bo/process/printfooter</footer>
		</tab>
		<tab caption="Historique" >
			<title>Historique</title>
			<condition name="stateManager" property="selectedRecord" />
			<action>historyAction.do</action>
			<form>/jsp/bo/request/requesthistory</form>
		</tab>
	</manager>

	<manager name="family">
		<title>Gestion des comptes</title>
		<tab caption="Recherche">
			<title>Rechercher un compte</title>
			<condition name="stateManager" property="navigate" />
			<action>navigationAction.do</action>
			<header separator="bottom">/jsp/bo/family/familysearch</header>
			<form separator="top">/jsp/bo/family/familydisplay</form>
		</tab>
		<tab caption="Identités" >
			<title>Les membres du compte</title>
			<condition name="stateManager" property="selectedRecord" />

			<state name="adults">
				<form>/jsp/bo/family/familydisplayadult</form>
			</state>
			
			<state name="children">
				<form>/jsp/bo/family/familydisplaychild</form>
			</state>
			
			<select name="stateManager" property="selectedRecord.adults" >
				<title>Les adultes du compte</title>
				<empty>Aucun adult saisi</empty>
				<display name="firstName" maxchars="18"/>
				<display name="lastName" maxchars="18"/>
				<action transition="adults" parameter="index">showAdultAction</action>
			</select>
			<select name="stateManager" property="selectedRecord.children" >
				<title>Les enfants du compte</title>
				<empty>Aucun enfant saisi</empty>
				<display name="firstName" maxchars="18"/>
				<display name="lastName" maxchars="18"/>
				<action transition="children" parameter="index">showChildAction</action>
			</select>
		</tab>
<!--
		<tab caption="Justificatifs" >
			<title>Les justificatifs du compte</title>
			<condition name="stateManager" property="selectedRecord" />
			<form>/jsp/bo/family/familydocument</form>
		</tab>
-->
		<tab caption="Demandes" >
			<title>Demandes du compte</title>
			<condition name="stateManager" property="selectedRecord" />
			<form>/jsp/bo/family/familyrequest</form>
		</tab>
		<tab caption="Gestion" >
			<title>Gestion du compte</title>
			<condition name="stateManager" property="selectedRecord" />
			<form>/jsp/bo/family/management</form>
		</tab>
	</manager>
	
	<manager name="card">
		<title>Gestion des cartes</title>
		<tab caption="Recherche">
			<title>Rechercher une carte</title>
			<action>navigationAction.do</action>
			<header separator="bottom">/jsp/bo/card/cardsearch</header>
			<form separator="top">/jsp/bo/card/carddisplayresults</form>
		</tab>
		<tab caption="Carte">
			<title>Modification de la carte</title>
			<condition name="stateManager" property="selectedRecord" />
			<header separator="bottom">/jsp/bo/card/carddisplay</header>
		</tab>
	</manager>

	<manager name="report">
		<title>Tableaux de suivi</title>
		<action>reportFilterAction.do</action>
		<tab caption="Etats" id="state">
			<title>Par état des demandes</title>
			<header>/jsp/bo/report/reportfilter</header>
			<form separator="top">/jsp/bo/report/reportstate</form>
		</tab>
		<tab caption="Types" id="type">
			<title>Par type de demande</title>
			<header>/jsp/bo/report/reportfilter</header>
			<form separator="top">/jsp/bo/report/reporttype</form>
		</tab>
		<tab caption="Mois" id="month">
			<title>Par mois</title>
			<header>/jsp/bo/report/reportfilter</header>
			<form separator="top">/jsp/bo/report/reportmonth</form>
		</tab>
		<tab caption="Alertes" id="quality">
			<title>Par temps de traitement</title>
			<header>/jsp/bo/report/reportfilter</header>
			<form separator="top">/jsp/bo/report/reportquality</form>
		</tab>
<!--		
		<tab caption="Rapport" id="report">
			<title>Edition de rapport</title>
			<action>reportSearchAction.do?report=report</action>
			<header>/jsp/bo/report/reportsearch</header>
			<form separator="top">/jsp/bo/report/reporting</form>
		</tab>
		<tab caption="Edition" id="edit">
			<title>Définition d'états</title>
			<header>/jsp/bo/report/reportfile</header>
			<form separator="top">/jsp/bo/report/reportedit</form>
		</tab>
-->		
	</manager>

	<manager name="process">
		<title>Administration télé-services</title>
		<tab caption="Sélection">
			<title>Sélection</title>
			<action>requestAction.do</action>
<!-- 			<style>css/formular.css</style> -->
			<default>info</default>
			
			<state name="info">
				<form>/jsp/bo/requestadmin/info</form>
			</state>
			
			<state name="select">
				<form>/jsp/bo/requestadmin/selection</form>
			</state>
			
			<menu caption="Préférences" icon="pictoParams">
				<menu caption="Paramètres généraux" icon="pictoParams">
					<action>requestAction.do?tab=8</action>
				</menu>
			</menu>	

			<select name="RequestForm" property="groups" icon="pictoParams">
				<title>Groupes de demandes</title>
				<empty>Aucune groupe de demande</empty>
				<display name="caption"/>
				<action transition="select" parameter="order">requestAction</action>
			</select>
		</tab>
		<tab caption="Justificatifs" id="documents">
			<title>Justificatifs</title>
			<condition name="RequestForm" property="display(documents)" />
			<action>requestAction.do</action>
<!-- 			<style>css/formular.css</style> -->
			<default>documents</default>

			<state name="documents">
				<form>/jsp/bo/requestadmin/documents</form>
			</state>
		</tab>
		<tab caption="Saisons" id="seasons">
			<title>Saisons</title>
			<condition name="RequestForm" property="display(seasons)" />
			<action>requestAction.do</action>
<!-- 			<style>css/formular.css</style> -->

			<state name="seasons">
				<form>/jsp/bo/requestadmin/seasons</form>
			</state>
		</tab>
		<tab caption="Alertes" id="alerts">
			<title>Alertes</title>
			<condition name="RequestForm" property="display(alerts)" />
			<action>requestAction.do</action>
<!-- 			<style>css/formular.css</style> -->

			<state name="alerts">
				<form>/jsp/bo/requestadmin/alerts</form>
			</state>
		</tab>
		<tab caption="Paramètres" id="parameters">
			<title>Paramètres</title>
			<condition name="RequestForm" property="display(parameters)" />
<!-- 			<style>css/formular.css</style> -->
			<form>/xmlhttp/tree</form>
		</tab>
		<tab caption="Documents" id="letters">
			<title>Paramètres</title>
			<condition name="RequestForm" property="display(letters)" />
			<action>requestAction.do</action>
<!-- 			<style>css/formular.css</style> -->
			<form>/jsp/bo/requestadmin/letters</form>
		</tab>
		<tab caption="Information" id="information">
			<title>Information</title>
			<condition name="RequestForm" property="display(information)" />
<!-- 			<style>css/formular.css</style> -->
			<form>/jsp/bo/requestadmin/information</form>
		</tab>
		<tab caption="Activation" id="activate">
			<title>Activation</title>
			<condition name="RequestForm" property="display(activate)" />
			<action>requestAction.do</action>
<!-- 			<style>css/formular.css</style> -->
			<form>/jsp/bo/requestadmin/summary</form>
		</tab>
		<tab caption="Paramètres globaux" id="globals">
			<title>Paramètres globaux</title>
			<condition name="RequestForm" property="display(globals)" />
			<action>requestAction.do</action>
<!-- 			<style>css/formular.css</style> -->
			<form>/jsp/bo/requestadmin/meansofcontact</form>
		</tab>
	</manager>
	<manager name="administration">
		<title>Administration</title>
		<action>adminAction.do</action>
		<tab caption="Catégories" id="categories">
			<title>Catégories</title>
			<state name="categories">
				<form>/jsp/bo/admin/adminservice</form>
			</state>
			<state name="create_category">
				<form>/jsp/bo/admin/createcategory</form>
			</state>
			
			<select name="AdminForm" property="categories" icon="pictoParams">
				<title>Les catégories</title>
				<empty>Aucune catégorie definie</empty>
				<display name="name"/>
				<action transition="categories" parameter="index">adminAction</action>
			</select>
		</tab>
		<tab caption="Utilisateurs" id="users">
			<title>Utilisateurs</title>

			<state name="users">
				<form>/jsp/bo/admin/adminuser</form>
			</state>
			
			<select name="AdminForm" property="users" icon="pictoAccount" style="list004">
				<title>Les utilisateurs</title>
				<empty>Aucun utilisateur defini</empty>
				<display name="displayLogin"/>
				<action transition="users" parameter="index">adminAction</action>
			</select>
		</tab>
		<tab caption="Règlements effectués" id="payment">
			<title>Règlements</title>
			<action>paymentsAction.do</action>
			<header>/jsp/bo/admin/paymentfilter</header>
			<form separator="top">/jsp/bo/admin/paymentsdisplay</form>
		</tab>
		<tab caption="Messages" id="messages">
			<title>Messages</title>
			<action>messageAction.do</action>
			<header separator="bottom">/jsp/bo/admin/messages</header>
		</tab>
		<tab caption="Import" id="import">
			<title>Import</title>
			<action>importAction.do</action>
			<header separator="bottom">/jsp/bo/admin/importheader</header>
			<footer>/jsp/bo/admin/displayimport</footer>
		</tab>
		<tab caption="Export" id="export">
			<title>Export</title>
			<action>exportAction.do</action>
			<header separator="bottom">/jsp/bo/request/requestsearch</header>
			<form separator="top">/jsp/bo/service/displayresults</form>
			<footer>/jsp/bo/admin/exportheader</footer>
		</tab>
	</manager>
  </managers>
  
  <menus>
	<menu caption="Gestion des demandes" icon="request">
		<menu caption="Rechercher une demande">
			<action>managerWizard.do?name=request&amp;reset&amp;empty</action>
		</menu>
		<menu caption="Nouvelles demandes">
			<detail name="stateManager" property="nbpending"/>
			<action>searchAction.do?request=validate&amp;name=request</action>
		</menu>
		<menu caption="Demandes en cours">
			<detail name="stateManager" property="nbopen"/>
			<action>searchAction.do?request=open&amp;name=request</action>
		</menu>
		<menu caption="Attestations à envoyer">
			<detail name="stateManager" property="nbnotify"/>
			<action>searchAction.do?request=notify&amp;name=request</action>
		</menu>
	</menu>
	<menu caption="Gestion des comptes" icon="family">
		<menu caption="Rechercher un compte">
			<action>managerWizard.do?name=family&amp;reset&amp;empty</action>
		</menu>
		<menu caption="Ajouter un compte">
			<condition name="stateManager" property="profile.rwprofile" />
			<action>familyAction.do?action=eCitizen</action>
		</menu>
		<menu caption="Ajouter une demande">
			<condition name="stateManager" property="profile.rwprofile" />
			<action>addFamilyRequest(event)</action>
		</menu>
	</menu>
<!--
	<menu caption="Gestion des cartes">
		<condition name="stateManager" property="profile.card" />
		<menu caption="Rechercher une carte">
			<action>managerWizard.do?name=card&amp;reset</action>
		</menu>
	</menu>
-->
	<menu caption="Tableaux de suivi" icon="report">
		<condition name="stateManager" property="profile.managerprofile" />
		<menu caption="Par état des demandes">
			<action>reportFilterAction.do?report=state&amp;tab=0</action>
		</menu>
		<menu caption="Par type de demande">
			<action>reportFilterAction.do?report=type&amp;tab=1</action>
		</menu>
		<menu caption="Par mois">
			<action>reportFilterAction.do?report=month&amp;tab=2</action>
		</menu>
		<menu caption="Par type d'alerte">
			<action>reportFilterAction.do?report=quality&amp;tab=3</action>
		</menu>
<!--
		<menu caption="Edition rapports">
			<action>reportSearchAction.do?report=report&amp;tab=4</action>
		</menu>
		<menu caption="Définition états">
			<action>reportSearchAction.do?report=edit&amp;tab=5</action>
		</menu>
-->
	</menu>
	<menu caption="Administration télé-services" icon="process">
		<condition name="stateManager" property="profile.admin" />
		<menu caption="Paramétrage">
			<action>requestAction.do?tab=0&amp;clear&amp;reset</action>
		</menu>
	</menu>
	<menu caption="Administration" icon="administration">
		<condition name="stateManager" property="profile.admin" />
		<menu caption="Gestion des catégories">
			<action>adminAction.do?transition=categories&amp;tab=0</action>
		</menu>
		<menu caption="Gestion des utilisateurs">
			<action>adminAction.do?transition=users&amp;tab=1</action>
		</menu>
		<menu caption="Gestion des règlements">
			<action>paymentsAction.do?tab=2</action>
		</menu>
		<menu caption="Messages">
			<action>messageAction.do?name=administration&amp;tab=3&amp;clear</action>
		</menu>
		<menu caption="Import de données">
			<action>importAction.do?name=administration&amp;tab=4&amp;clear</action>
		</menu>
		<menu caption="Export de demandes">
			<action>exportAction.do?name=administration&amp;tab=5&amp;clear</action>
		</menu>
	</menu>
  </menus>
  
</cvqmanager>
